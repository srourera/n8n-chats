<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

    <!-- iOS: abrir a pantalla completa al iniciar desde Pantalla de inicio -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Opciones: default | black | black-translucent -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="MiApp" />

    <!-- Icono para iOS (data URL para mantener 1 solo archivo). Reemplaza por tu icono si quieres. -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Crect width='180' height='180' fill='%23111'/%3E%3Ctext x='50%25' y='55%25' font-family='system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial' font-size='72' text-anchor='middle' fill='white'%3E⚡%3C/text%3E%3C/svg%3E" />

    <title>MiApp a pantalla completa</title>
    <style>
      /* Usa el área completa respetando el notch y la barra de estado */
      html, body { height: 100%; }
      body {
        margin: 0;
        -webkit-font-smoothing: antialiased;
        font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        background: linear-gradient(180deg, #0f172a, #1e293b);
        color: #fff;

        /* Evita saltos por safe areas y respeta el notch */
        padding-top: env(safe-area-inset-top);
        padding-right: env(safe-area-inset-right);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);

        display: grid;
        place-items: center;
      }

      .card {
        width: min(92vw, 720px);
        border-radius: 20px;
        padding: 24px;
        background: rgba(255,255,255,0.08);
        backdrop-filter: blur(8px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      }

      h1 { margin: 0 0 8px; font-size: clamp(24px, 4vw, 36px); }
      p { margin: 0 0 16px; line-height: 1.45; }

      .badge { display: inline-block; padding: 6px 10px; border-radius: 999px; background: rgba(0,0,0,0.35); font-size: 12px; }

      .hint { opacity: 0.9; font-size: 14px; }

      .standalone .badge { background: rgba(34,197,94,0.4); }

      /* Evita el “rubber band” vertical (parcialmente en iOS) */
      body { overscroll-behavior: none; }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
    <script type="module">
    	import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';
    
    	createChat({
    		webhookUrl: 'https://n8n.ridaflows.com/webhook/5dc6089b-a9b3-4330-868f-94285481d178/chat'
    	});
    </script>
  </head>
  <body>
    <main class="card">
      <div class="badge" id="mode">Modo navegador</div>
      <h1>iOS a pantalla completa</h1>
      <p class="hint">Añade esta página a tu pantalla de inicio para que se abra sin la barra de navegación de Safari.</p>
      <ol class="hint">
        <li>En Safari, toca <strong>Compartir</strong> (icono cuadrado con flecha).</li>
        <li>Toca <strong>Añadir a pantalla de inicio</strong>.</li>
        <li>Ábrela desde el icono creado: se ejecutará en <em>standalone</em>.</li>
      </ol>
    </main>

    <script>
      // Detectar si estamos en modo standalone (iOS) o display-mode standalone (otros)
      const isStandalone = window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;
      if (isStandalone) {
        document.body.classList.add('standalone');
        const el = document.getElementById('mode');
        if (el) el.textContent = 'Modo standalone (Pantalla completa)';
      }

      // iOS: bloquear gesto de zoom accidental con doble tap (opcional)
      let lastTouchEnd = 0;
      document.addEventListener('touchend', function (event) {
        const now = Date.now();
        if (now - lastTouchEnd <= 300) event.preventDefault();
        lastTouchEnd = now;
      }, { passive: false });
    </script>
  </body>
</html>
